
-- testing free var shadowing in open codegen

-- foo : ℕ → Σ(fst: ℕ → ℕ, snd : ℕ → ℕ) = ~<λ x.
--   ~(let y = x;
--     let f = ~<λ x. y>;
--     let g = ~<λ x. x>;
--     <f, g>)>;

do ref ← new 100;
do n ← ~<do n ← read ref; return n>;

return n


-- addcode : □ (ℕ → ℕ → ℕ) = <
--   λ x y. ℕElim suc x y>;

-- add = ~addcode;

-- nfadd : ℕ → ℕ → ℕ = ~<λ x y. ~(let y = add x y; <y>)>;

-- return $ nfadd 100 100
